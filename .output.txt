
> shoplist-be@0.1.1 test
> jest --runInBand src/app/database-backup/database-backup.service.spec.ts

FAIL src/app/database-backup/database-backup.service.spec.ts
  DatabaseBackupService
    âœ• should be defined (1 ms)
    constructor
      âœ• should create backup directory if it does not exist (1 ms)
      âœ• should not create backup directory if it already exists
    createDatabaseBackup
      âœ• should execute mongodump command with correct parameters
      âœ• should not execute mongodump if database credentials are missing
      âœ• should handle errors during backup (1 ms)
      âœ• should log error if stderr contains error message
      âœ• should call cleanupOldBackups after successful backup
    cleanupOldBackups
      âœ• should delete files older than 7 days (1 ms)
      âœ• should handle errors during cleanup
    manualBackup
      âœ• should call createDatabaseBackup

  â— DatabaseBackupService â€º should be defined

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º constructor â€º should create backup directory if it does not exist

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º constructor â€º should not create backup directory if it already exists

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º createDatabaseBackup â€º should execute mongodump command with correct parameters

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º createDatabaseBackup â€º should not execute mongodump if database credentials are missing

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º createDatabaseBackup â€º should handle errors during backup

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º createDatabaseBackup â€º should log error if stderr contains error message

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º createDatabaseBackup â€º should call cleanupOldBackups after successful backup

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º cleanupOldBackups â€º should delete files older than 7 days

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º cleanupOldBackups â€º should handle errors during cleanup

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

  â— DatabaseBackupService â€º manualBackup â€º should call createDatabaseBackup

    TypeError: common_1.Logger.overrideLogger is not a function

      69 |         },
      70 |       ],
    > 71 |     }).compile();
         |        ^
      72 |
      73 |     service = module.get<DatabaseBackupService>(DatabaseBackupService);
      74 |     configService = module.get<ConfigService>(ConfigService);

      at TestingModuleBuilder.applyLogger (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:127:25)
      at TestingModuleBuilder.compile (../node_modules/.pnpm/@nestjs+testing@10.4.15_@nestjs+common@10.4.15_class-transformer@0.5.1_class-validator@_21d6706a2db3e2345ca60bf91347a67c/node_modules/@nestjs/testing/testing-module.builder.js:59:14)
      at Object.<anonymous> (app/database-backup/database-backup.service.spec.ts:71:8)

[999D[KTest Suites: 1 failed, 1 total
Tests:       11 failed, 11 total
Snapshots:   0 total
Time:        1.899 s
Ran all test suites matching /src\/app\/database-backup\/database-backup.service.spec.ts/i.